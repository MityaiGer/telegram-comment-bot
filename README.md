# Telegram Бот для Комментариев

Python-бот для Telegram, позволяющий автоматизировать отправку комментариев в каналах с использованием нескольких аккаунтов.

## Возможности

- Поддержка множества аккаунтов для комментирования
- Поддержка прокси для каждого аккаунта
- Настраиваемые задержки между комментариями
- Управление очередью задач
- Автоматическое управление сессиями
- Аутентификация пользователей и контроль доступа
- Интерактивный интерфейс команд
- Автоматический мониторинг активности
- Система автоматического восстановления соединения
- Ротация прокси для разных аккаунтов

## Требования

- Python 3.7+
- Учетные данные Telegram API (API ID и API Hash)
- Токен Telegram бота
- Настройки прокси (опционально)
- Доступ к Telegram API
- Достаточно памяти для хранения сессий

## Установка

1. Клонируйте репозиторий:
```bash
git clone <ссылка-на-ваш-репозиторий>
cd telegram-comment-bot
```

2. Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Для Windows: venv\Scripts\activate
```

3. Установите необходимые пакеты:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` в корневой директории со следующим содержимым:
```
TELEGRAM_BOT_TOKEN=ваш_токен_бота
PROXY_TYPE=socks5
PROXY_ADDR=адрес_прокси1,адрес_прокси2,адрес_прокси3  # Можно указать несколько через запятую
PROXY_PORT=1080
PROXY_USERNAME=имя_пользователя_прокси
PROXY_PASSWORD=пароль_прокси
```

5. Создайте следующие директории в корне проекта:
```bash
mkdir accounts account_fail tasks
```

## Структура проекта

- `main.py` - Точка входа в приложение
- `bot.py` - Реализация Telegram бота и обработчики команд
- `account_manager.py` - Управление сессиями Telegram аккаунтов
- `comment_sender.py` - Функционал отправки комментариев
- `task_manager.py` - Управление задачами и очередью

## Использование

1. Поместите файлы сессий Telegram в директорию `accounts` вместе с соответствующими JSON файлами, содержащими учетные данные аккаунтов.

2. Запустите бота:
```bash
python main.py
```

3. Взаимодействие с ботом через Telegram:
   - Отправьте `/start` для начала работы
   - Следуйте инструкциям для:
     - Указания ссылки на пост
     - Ввода комментариев (по одному на строку)
     - Установки задержки между комментариями

## Формат JSON файла аккаунта

Каждый аккаунт в директории `accounts` должен иметь соответствующий JSON файл:
```json
{
    "phone": "номер_телефона",
    "app_id": "telegram_app_id",
    "app_hash": "telegram_app_hash",
    "session_file": "имя_файла_сессии"
}
```

## Настройка прокси

Бот поддерживает работу с несколькими прокси-серверами:
- Можно указать несколько прокси-адресов через запятую в .env файле
- Происходит автоматическая ротация прокси между аккаунтами
- Поддерживаются различные типы прокси (http, socks5)
- Автоматическое переподключение при проблемах с прокси

## Безопасность

- Бот включает аутентификацию пользователей
- Только авторизованные пользователи (определенные в списке `allowed_users`) могут использовать бота
- Поддержка прокси для повышенной приватности
- Безопасное управление файлами сессий
- Автоматическое отключение неактивных сессий
- Защита от флуда и спама

## Мониторинг и обработка ошибок

Бот включает комплексную систему мониторинга и обработки ошибок:
- Автоматическое отслеживание состояния задач
- Мониторинг активности каждой сессии
- Автоматическое отключение при длительном простое (30 минут)
- Логирование всех действий и ошибок
- Обработка ошибок подключения и повторные попытки
- Система восстановления после сбоев

## Логирование

Бот ведет подробное логирование:
- Все действия записываются в `app_logs.log`
- Отдельное логирование ошибок
- Информация о подключениях и отключениях
- Статистика использования
- Данные о выполненных задачах

## Участие в разработке

Вы можете создавать issues, делать форки репозитория и отправлять pull request'ы для улучшения проекта.

## Лицензия

[Выбранная вами лицензия]

## Отказ от ответственности

Этот бот должен использоваться ответственно и в соответствии с условиями использования Telegram. Авторы не несут ответственности за любое неправильное использование или нарушения.

## Известные ограничения

- Бот автоматически отключается после 30 минут бездействия
- Существуют ограничения Telegram на частоту отправки сообщений
- Некоторые каналы могут запрещать комментарии
- Возможны временные блокировки при частом использовании 